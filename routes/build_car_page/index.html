<!DOCTYPE html>
<!--  This site was created in Webflow. http://www.webflow.com  -->
<!--  Last Published: Sun Sep 16 2018 01:52:17 GMT+0000 (UTC)  -->
<html data-wf-page="5b9a06d743b15e7defbf89fa" data-wf-site="5b9a02b99e7fac5ac4c88a3b">
<head>
  <meta charset="utf-8">
  <title>Resources</title>
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <meta content="Webflow" name="generator">
  <link href="css/normalize.css" rel="stylesheet" type="text/css">
  <link href="css/webflow.css" rel="stylesheet" type="text/css">
  <link href="css/apr-resources.webflow.css" rel="stylesheet" type="text/css">
  <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.4.7/webfont.js" type="text/javascript"></script>
  <script type="text/javascript">WebFont.load({  google: {    families: ["Lato:100,100italic,300,300italic,400,400italic,700,700italic,900,900italic","Open Sans:300,300italic,400,400italic,600,600italic,700,700italic,800,800italic","PT Sans:400,400italic,700,700italic"]  }});</script>
  <!-- [if lt IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js" type="text/javascript"></script><![endif] -->
  <script type="text/javascript">!function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);</script>
  <!-- <link href="https://daks2k3a4ib2z.cloudfront.net/img/favicon.ico" rel="shortcut icon" type="image/x-icon"> -->
  <link href="images/favicon-32x32.png" rel="shortcut icon" type="image/x-icon">
  <link href="https://daks2k3a4ib2z.cloudfront.net/img/webclip.png" rel="apple-touch-icon">
</head>
<body>
  <div class="sidebar-wrapper">
    <div class="header">
      <h1 class="brand-text">Autonomous Power Racing</h1>
      <div class="grey-rule w-hidden-small w-hidden-tiny"></div>
      <p class="site-description">Robotics skills are some of the most in demand. Here&#x27;s your introduction to the tech used to build self-driving cars with techniques similar to what is used in the field today.</p>
      <div class="grey-rule w-hidden-small w-hidden-tiny"></div>
      <nav class="navigation">
        <a href="/bom" class="nav-link">Bill of Materials</a>
        <a href="/build" class="nav-link">Build Your car</a>
        <div class="grey-rule w-hidden-small w-hidden-tiny"></div>
      </nav>
    </div>
    <div data-collapse="medium" data-animation="default" data-duration="400" class="nav w-nav">
      <div class="w-container">
        <div class="hamburger-button w-nav-button">
          <div class="w-icon-nav-menu"></div>
        </div>
      </div>
      <a href="/dashboard" class="navigation-link-4 w-nav-link">Dashboard</a>
      <a href="/logout" class="nav-link-2 w-nav-link">Logout</a>
    </div>
  </div>
  <div class="div-block">
    <h1 class="heading-3"><br>Build Your Car</h1>
    <h3 class="heading-4">The donkey car hardware is designed to be easy for you to assemble. We’re ready to go!<br></h3>
    <h4 class="heading-5">Step 1: Connect Raspberry Pi to Controller</h4>
    <p class="paragraph">The first thing you will want to do is attach the controller to the RPi.  This can be done by connecting 4 jumper wires from the GPIO header on the RPi to the pins on the short edge of the controller, as below.<br></p><img src="images/Screen-Shot-2018-09-14-at-5.07.16-AM.png" srcset="images/Screen-Shot-2018-09-14-at-5.07.16-AM-p-500.png 500w, images/Screen-Shot-2018-09-14-at-5.07.16-AM-p-1080.png 1080w, images/Screen-Shot-2018-09-14-at-5.07.16-AM-p-1600.png 1600w, images/Screen-Shot-2018-09-14-at-5.07.16-AM.png 1632w" sizes="(max-width: 2331px) 70vw, 1632px">
    <div class="text-block-3"> What matters most is that you match the text written on the board above.</div>
    <blockquote class="block-quote"><strong>Message! </strong>The Raspberry Pi GPIO pins can only output a voltage of 3.3 volts. This means that any voltage above 3.3 volts will likely result in damage to the Raspberry Pi. The controller can communicate with any micro-controller at voltages between 2.5 – 5.5 volts and control motors at a different voltage up to 5.0 volts. This means that the Raspberry Pi can communicate with the PCA9685 using 3.3 volts while the PCA9685 controls the motors at 5 volts, with no damage being done.</blockquote>
    <blockquote class="block-quote-2"><strong>Message! </strong>The PCA9685 uses a protocol called “I2C” to communicate with microcontrollers.  This allows multiple controllers to be attached using the same two pins on the Raspberry Pi, provided they have a different identifier.  You can read more about I2C here: <a href="https://learn.sparkfun.com/tutorials/i2c">https://learn.sparkfun.com/tutorials/i2c </a></blockquote>
    <h4 class="heading-5">Step 2: Connect DC Motor to Controller</h4>
    <p class="paragraph">The next step is to connect the ESC. The black and red wires running from the On/Off switch to the Adafruit PCA9685. The thin wires coming out of the ESC should be coloured Red, White and Black with a connector on the end of it. This is going to connect to the pins labelled as “channel 0” on the controller. Make sure that the black coloured wire is on the outside of the board (or the black wire goes into the pin that has “GND” written on it. If you do this wrong, you will damage the motor and/or the controller.<br></p><img src="images/Screen-Shot-2018-09-14-at-5.52.48-AM.png" width="443" srcset="images/Screen-Shot-2018-09-14-at-5.52.48-AM-p-500.png 500w, images/Screen-Shot-2018-09-14-at-5.52.48-AM.png 886w" sizes="(max-width: 767px) 70vw, 443px" class="image-2">
    <h4 class="heading-5">Step 3: Connect Servo to Controller</h4>
    <p class="paragraph">Now do the same thing with the steering servo wire (which looks exactly the same as the ESC wires). This is going to connect to the pins labelled as “channel 1” on the controller. Make sure that the black coloured wire is on the outside of the board (or the black wire goes into the pin that has “GND” written on it. If you do this wrong, you will damage the motor and/or the controller.<br></p><img src="images/Screen-Shot-2018-09-14-at-5.57.07-AM.png" width="456" srcset="images/Screen-Shot-2018-09-14-at-5.57.07-AM-p-500.png 500w, images/Screen-Shot-2018-09-14-at-5.57.07-AM.png 912w" sizes="(max-width: 767px) 70vw, 456px" class="image-3">
    <h4 class="heading-5">Step 4: Connect Camera to Raspberry Pi</h4>
    <p class="paragraph">The Raspberry Pi Camera connects to the Raspberry Pi’s CSI port.  This is labelled as “Camera” on the RPi and is a ribbon cable.  To correctly install this cable, gently lift up the little black lip on the RPi camera connector until it sits slightly elevated.  Then, place the ribbon into the slot, with the silver side facing the HMDI port, push the black lip back down to secure the ribbon cable.<br></p>
    <h4 class="heading-5">Step 5: Screw Everything Down</h4>
    <p class="paragraph">At this stage, you can screw the RPi, controller and camera into the 3D printed roll cage using the provided screws.<br></p>
    <h4 class="heading-5">Step 6: Connect the Power</h4>
    <p class="paragraph">The second last connection to be made is the USB Power Bank to the RPi.  Use a micro USB cable to do this.<br></p>
    <h4 class="heading-5">Step 7: Connect the Battery</h4>
    <p class="paragraph">The final step is to connect the battery to the ESC.  Make sure that you match up the red and black wires to each other.  Red – Red and Black – Black.You should now have all the hardware ready to go.  The only missing part is the SD Card into the Raspberry Pi.  We must put the software on it before we can insert it into the RPi and turn it on. <br></p>
    <h1 class="heading-3">Configuring the Raspberry Pi</h1>
    <h4 class="heading-5">Step 1: Flash the SD Card</h4>
    <p class="paragraph">Download <a href="https://drive.google.com/open?id=1vr4nEXLEh4xByKAXik8KhK3o-XWgo2fQ" target="_blank">RPi 3B and 3B+</a> or <a href="https://drive.google.com/open?id=1otqNRBs1kqNJYocCp4kbMjcRKWE2zW7A" target="_blank">RPi Zero</a> (1.1GB). Flash the SD Card image onto the Raspberry Pi by following these instructions: <br><br>‍<a href="https://www.raspberrypi.org/documentation/installation/installing-images/">https://www.raspberrypi.org/documentation/installation/installing-images/<br><br>‍</a>Once you have the SD card image flashed onto the Raspberry Pi, you can boot it up.<br></p>
    <h4 class="heading-5">Step 2: Setup the Pi&#x27;s WiFi for first boot</h4>
    <p class="paragraph">We now need to connect the Raspberry Pi to the network so we can remotely configure it.<br></p>
    <blockquote class="block-quote-2"><strong>Note: </strong>You will need a HDMI cable, a display, and keyboard for the next steps.</blockquote>
    <p class="paragraph">Insert the SD card into the Raspberry and start it up by plugging it into a 5v USB power supply.  It will automatically log you into the command line after it has finished booting. <br><br>Login to the Raspberry Pi using the following default credentials:<br>‍<br><strong>Username:</strong> pi<br><strong>Password:</strong> asdfasdf<br><br>Run the following.<br></p>
    <div class="rich-text-block w-richtext">
      <p><br></p>
      <h6><strong><em>sudo nano /etc/wpa_supplicant/wpa_supplicant.conf </em></strong></h6>
      <p>Add the following code snippet to the file you just opened and save it</p>
      <h6><strong><em>network = {</em></strong></h6>
      <h6><strong><em>	ssid=&quot;&lt;Your network SSID&gt;&quot;</em></strong></h6>
      <h6><strong><em>	psk=&quot;&lt;Your network password&gt;&quot;</em></strong></h6>
      <h6><strong><em>}</em></strong></h6>
      <p>Now, reboot the Raspberry Pi with the following command</p>
      <h6><strong><em>sudo shutdown -r</em></strong></h6>
      <p>Run the following command to get the IP address of the Raspberry Pi</p>
      <h6><strong><em>sudo ifconfig wlan0</em></strong></h6>
      <p>Write down the IP address of the Pi.</p>
      <p><br></p>
    </div>
    <h4 class="heading-5">--<br>Step 2b: Setup the Pi&#x27;s Hostname</h4>
    <p class="paragraph">We can also setup the hostname so that your Pi easier to find once on the network. If yours is the only Pi on the network, then you can find it with<br><br><span><strong>ping d2.local</strong></span><br><br>Once it&#x27;s booted. If there are many other Pi&#x27;s on the network, then this will have problems. If you are on a Linux machine, or are able to edit the UUID partition, then you can edit the <strong>/etc/hostname and /etc/hosts</strong> files now to make finding your pi on the network easier after boot. Edit those to replace Raspberry Pi with a name of your choosing. <br><br>Use all lower case, no special characters, no hyphens( - ), no underscores( _ ).<br><br><span><strong class="bold-text">sudo vi /media/userID/UUID/etc/hostname<br>sudo vi /media/userID/UUID/etc/hosts</strong></span><br>‍<br>The easiest way (on Ubuntu) is to use the<strong> findcar</strong> donkey command. You can try <strong>ping raspberrypi.local</strong>. If you&#x27;ve modified the hostname, then you should try: <strong>ping &lt;your hostname&gt;.local</strong>. This will fail on a windows machine. <br><br>Windows users will need the full IP address (unless using cygwin).<br></p>
    <h4 class="heading-5">--<br>Step 3: Enable SSH</h4>
    <p class="paragraph">Once the RPi is back on, you can now configure it so that you can connect to it remotely over SSH. <br><br>Run the command.<br>‍<br><span><strong><em>sudo raspi-config<br><br></em></strong></span>which brings up a blue menu screen.<br></p>
    <blockquote class="block-quote-2"><strong>Note: </strong>SSH might already be enabled on the Pi. So, you might not even need to enable it.</blockquote>
    <h1 class="heading-3">Install the Software</h1>
    <h4 class="heading-5">Step 1: Install Donkey Car on Linux (<a href="http://docs.donkeycar.com/guide/install_software/#install-donkeycar-on-windows" target="_blank">Windows</a> and <a href="http://docs.donkeycar.com/guide/install_software/#install-donkeycar-on-mac" target="_blank">Mac</a>)</h4>
    <p class="paragraph">Since the Raspberry Pi is not very powerful we need to transfer the data to our computer to train.<br><br>Install dependencies and setup virtualenv<br></p>
    <div class="text-block-4"><strong>sudo apt-get install virtualenv build-essential python3-dev gfortran<br>libhdf5-dev<br>virtualenv env -p python3<br>source env/bin/activate<br>pip install keras==2.0.<br>pip install tensorflow==1.3.0</strong><br></div>
    <p class="paragraph">Install donkeycar.<br></p>
    <div class="text-block-4"><strong>git clone https://github.com/wroscoe/donkey donkeycar<br>pip install -e donkeycar<br>donkey createcar --path ~/d2</strong><br></div>
    <blockquote class="block-quote-2"><strong>Note: </strong>After closing the Terminal, when you open it again, you will need to type source activate donkey to re-enable the mappings to donkey specific Python libraries.</blockquote>
    <h4 class="heading-5">Step 2: SSH into Pi</h4>
    <p class="paragraph">From your own computer, run the following command to remotely connect to the Pi.<br><br><strong>ssh pi@&lt;the pi’s IP address&gt;<br><br></strong>You’ll be prompted to enter your RPi’s password. Do that. You’re now connected to your RPi remotely!<br></p>
    <h4 class="heading-5">Step 3: Update Donkey Car Python code and install</h4>
    <p class="paragraph">First, you’ll need expand RPi file system from 2.4G to full size of SD card.<br><br>Run <br><br><span><strong>$ sudo raspi-config<br></strong></span><br>- &gt; Go to advanced <br>- &gt; Expand rpi to full size<br>- &gt; reboot<br><br>Now that you’ve connected to the Pi, run the following commands to clone and install the Donkey Car repository on the Pi. This is the most up to date stuff. <br><br><strong>cd ~/donkeycar <br>git pull<br>pip install -e .</strong><br></p>
    <h1 class="heading-3">Start Driving</h1>
    <h4 class="heading-5">Step 1: Make sure you’ve created your car application</h4>
    <p class="paragraph">Run the command<br>‍<br><strong>donkey createcar --template donkey2 --path ~/d2</strong><br></p>
    <h4 class="heading-5">Step 2: Drive the car via web portal</h4>
    <p class="paragraph">On the raspberry pi:<br><br>Open your car’s folder and drive your car<br><br><span><strong>cd d2<br>python3 manage.py drive<br></strong></span><br>These commands will run the script that’s responsible for driving the car. You can now control your car from a web browser (on your phone or computer). Navigate to:<br><br><span><strong class="bold-text-2">http://&lt;the RPi’s IP address&gt;:8887</strong></span><br></p>
    <blockquote class="block-quote-2"><strong>Note: </strong>Your computer and phone must be connected to the same Wi-Fi network as the Pi.</blockquote>
    <h4 class="heading-5">Step 3: Drive with the Web Controller</h4>
    <p class="paragraph">On your phone you can now press start to set your phones current tilt to be zero throttle and steering. Now tilting your phone forward will increase throttle and tilting it side to side will turn the steering.<br></p>
    <h5>Features</h5>
    <ul>
      <li>Recording - Press record data to start recording images, steering angels and throttle values.</li>
      <li>Throttle mode - Option to set the throttle as constant. This is used in races if you have a pilot that will steer but doesn&#x27;t control throttle.</li>
      <li>Pilot mode - Choose this if the pilot should control the angle and/or throttle.</li>
      <li>Max throttle - Select the maximum throttle.</li>
    </ul>
    <h5>Keyboard shortcuts</h5>
    <ul>
      <li>space : stop car and stop recording</li>
      <li>r : toggle recording</li>
      <li>i : increase throttle</li>
      <li>k : decrease throttle</li>
      <li>j : turn left</li>
      <li>l : turn right</li>
    </ul>
    <h4 class="heading-5">Step 4: Calibrate the Steering and Throttle Values</h4>
    <p class="paragraph">First, run the following command to test what values are best to choose for steering and throttle of the car.<br><br><span><strong>donkey calibrate -channel 1</strong></span><br></p>
    <blockquote class="block-quote-2"><strong>Note: </strong>channel 1 is for steering and channel 0 is for throttle.</blockquote>
    <p class="paragraph">Now enter different values in the command line and see the results for yourself.<br><br>Once you’ve figured what values to set for steering and throttle of the car, open the following file and add those values in their corresponding places.<br><br><strong>nano config.py</strong><br></p>
    <h1 class="heading-3">Train Your Car</h1>
    <h4 class="heading-5">Step 1: Control the Car with a Joystick/ Mobile Phone</h4>
    <p class="paragraph">The default controller to drive the car with your phone or browser. This has a web based live preview of the camera on the car. <br><br>For other controller options see <a href="http://docs.donkeycar.com/parts/controllers/">http://docs.donkeycar.com/parts/controllers/</a><br></p>
    <h4 class="heading-5">Step 2: Create an AutoPilot with Keras</h4>
    <p class="paragraph">We now need to train the car by using the web interface. Practice driving around the track a couple times without recording data. When you&#x27;re confident you can drive 10 laps without mistake press Start Recording. <br><br>After you&#x27;ve collected 10-20 laps of good data (5-20k images) you can stop your car with Ctrl-c in the ssh session for your car.<br><br>The data you&#x27;ve collected is in the data folder in the most recent tub folder.<br></p>
    <h4 class="heading-5">Step 3: Transfer data from the Pi to your computer</h4>
    <p class="paragraph">Run the following command to copy the image data folders from the Pi back to your computer.<br><br><strong>rsync -r pi@&lt;your_pi_ip_address&gt;:~/d2/data/ ~/d2/data/</strong><br></p>
    <h4 class="heading-5">Step 4: Train a Model</h4>
    <p class="paragraph">On your computer run the following command to train the model using the data you transferred from the Pi.<br><br><strong>python ~/d2/manage.py train --tub &lt;tub folder names comma separated&gt; --model ./models/mypilot</strong><br></p>
    <h4 class="heading-5">Step 5: Transfer the model back to the Pi</h4>
    <p class="paragraph">Now you can use rsync again to move your pilot back to your car.<br><br><strong>rsync -r ~/d2/models/ pi@&lt;your_ip_address&gt;:~/d2/models/</strong><br></p>
    <h1 class="heading-3">Drive!</h1>
    <p class="paragraph">Congratulations! You are now ready to drive the car using the trained model. Run the following command on the car to start driving.<br><br><strong>python manage.py drive --model ~/d2/models/mypilot</strong><br></p>
  </div>
  <script src="https://code.jquery.com/jquery-3.3.1.min.js" type="text/javascript" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
  <script src="js/webflow.js" type="text/javascript"></script>
  <!-- [if lte IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/placeholders/3.0.2/placeholders.min.js"></script><![endif] -->
</body>
</html>